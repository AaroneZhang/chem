/*

 DHTML Suite for Applications.
 Copyright (C)2006  Alf Magne Kalleland(post@dhtmlgoodies.com)

 www.dhtmlgoodies.com
 Alf Magne Kalleland
*/
if(!window.DHTMLSuite)var DHTMLSuite={};var referenceToDHTMLSuiteContextMenu;DHTMLSuite.contextMenu=function(){this.menuModels={};this.menuObject=!1;this.menuUls=[];this.width=100;this.indexCurrentlyDisplayedMenuModel=this.srcElement=!1;try{standardObjectsCreated||DHTMLSuite.createStandardObjects()}catch(a){alert("You need to include the dhtmlSuite-common.js file")}this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this};
DHTMLSuite.contextMenu.prototype={setWidth:function(a){this.width=a},setLayoutCss:function(){},attachToElement:function(a,b,c){window.refToThisContextMenu=this;!a&&b&&(a=document.getElementById(b));if(!a.id)a.id="context_menu"+Math.random(),a.id=a.id.replace(".","");this.menuModels[a.id]=c;c.setSubMenuType(1,"sub");c.setMainMenuGroupWidth(this.width);if(!this.defaultMenuModel)this.defaultMenuModel=c;a.oncontextmenu=this.__displayContextMenu;a.onmousedown=function(){window.refToThisContextMenu.__setReference(window.refToThisContextMenu)};
DHTMLSuite.commonObj.__addEventEl(a);DHTMLSuite.commonObj.addEvent(document.documentElement,"click",this.__hideContextMenu)},attachTo:function(a,b){a=DHTMLSuite.commonObj.getEl(a);this.attachToElement(a,!1,b)},__setReference:function(a){referenceToDHTMLSuiteContextMenu=a},__displayContextMenu:function(a){document.all&&(a=event);var b=referenceToDHTMLSuiteContextMenu;if(!b.isContextMenuBusy){b.isContextMenuBusy=!0;b.srcElement=DHTMLSuite.commonObj.getSrcElement(a);if(!b.indexCurrentlyDisplayedMenuModel||
b.indexCurrentlyDisplayedMenuModel!=this.id)b.indexCurrentlyDisplayedMenuModel?b.menuObject.innerHTML="":b.__createDivs(),b.menuItems=b.menuModels[this.id].getItems(),b.__createMenuItems(b.menuModels[this.id]);b.menuObject.style.display="block";b.indexCurrentlyDisplayedMenuModel=this.id;var c=b.menuBar.menuBarObj.offsetHeight,d=a.clientX+b.menuBar.menuBarObj.offsetWidth-document.body.clientWidth+15;b.menuObject.style.left=d>0?a.clientX+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft)-
d+"px":a.clientX+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft)+"px";d=a.clientY+c-document.body.clientHeight;b.menuObject.style.top=d>0?a.clientY+Math.max(document.body.scrollTop,document.documentElement.scrollTop)-d+"px":a.clientY+Math.max(document.body.scrollTop,document.documentElement.scrollTop)+"px";b.menuObject.style.display="block";setTimeout("referenceToDHTMLSuiteContextMenu.isContextMenuBusy=false",20);return!1}},__hideContextMenu:function(){var a=referenceToDHTMLSuiteContextMenu;
if(a){if(a.menuObject)a.menuObject.style.display="none";for(var b=0,c=a.menuBar.submenuGroups.length;b<c;b++)if(document.getElementById(a.menuBar.submenuGroups[b]))document.getElementById(a.menuBar.submenuGroups[b]).style.display="none"}},__createDivs:function(a){var b=!1,c=document.getElementsByTagName("DIV");c.length>0&&(b=c[0]);this.menuObject=document.createElement("DIV");this.menuObject.style.cssText="position:absolute;z-index:10000;";this.menuObject.className="DHTMLSuite_contextMenu";this.menuObject.id=
"DHTMLSuite_contextMenu"+DHTMLSuite.commonObj.getUniqueId();this.menuObject.style.backgroundImage="url('"+DHTMLSuite.configObj.imagePath+"context-menu/context-menu-gradient.gif')";this.menuObject.style.backgroundRepeat="repeat-y";if(this.width)this.menuObject.style.width=this.width+"px";if(a)this.menuObject.style.display="none";b?b.parentNode.insertBefore(this.menuObject,b):document.body.appendChild(this.menuObject);this.menuBar=new DHTMLSuite.menuBar;this.menuBar.setActiveSubItemsOnMouseOver(!0);
this.menuBar.setTarget(this.menuObject.id);this.menuBar.addMenuItems(this.defaultMenuModel);this.menuBar.init()},__mouseOver:function(){this.className="DHTMLSuite_item_mouseover";if(!document.all)this.style.backgroundPosition="left center"},__mouseOut:function(){this.className="";if(!document.all)this.style.backgroundPosition="1px center"},__createMenuItems:function(a){this.menuBar.deleteAllMenuItems();this.menuBar.addMenuItems(a);this.menuBar.init()}};
