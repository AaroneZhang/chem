/*

 DHTML Suite for Applications.
 Copyright (C)2006  Alf Magne Kalleland(post@dhtmlgoodies.com)

 www.dhtmlgoodies.com
 Alf Magne Kalleland
*/
if(!window.DHTMLSuite)var DHTMLSuite={};DHTMLSuite.menuModelItem=function(){this.state="regular"};
DHTMLSuite.menuModelItem.prototype={setMenuVars:function(a,b,c,d,e,f,g,h,i,k){this.id=a;this.itemText=b;this.itemIcon=c;this.url=d;this.parentId=e;g instanceof Array?(this.jsFunction=g.shift(),this.jsArgs=g):this.jsFunction=g;this.hasSubs=this.depth=this.separator=!1;this.helpText=f;this.submenuWidth=i;this.groupHeight=k;this.visible=!0;this.type=h?h:this.parentId?"top":"sub"},setAsSeparator:function(a,b){this.id=a;this.parentId=b;this.visible=this.separator=!0;this.type=this.parentId?"top":"sub"},
setVisibility:function(a){this.visible=a},getState:function(){return this.state},setState:function(a){this.state=a},setSubMenuWidth:function(a){this.submenuWidth=a},setIcon:function(a){this.itemIcon=a},setText:function(a){this.itemText=a}};DHTMLSuite.menuModel=function(){this.menuItems={};this.menuItemsOrder=[];this.submenuType=[];this.submenuType[1]="top";for(var a=2;a<20;a++)this.submenuType[a]="sub";try{standardObjectsCreated||DHTMLSuite.createStandardObjects()}catch(b){alert("You need to include the dhtmlSuite-common.js file")}};
DHTMLSuite.menuModel.prototype={addItem:function(a,b,c,d,e,f,g,h,i,k){a||(a=this.__getUniqueId());try{this.menuItems[a]=new DHTMLSuite.menuModelItem}catch(j){alert("Error: You need to include dhtmlSuite-menuModel.js in your html file")}this.menuItems[a].setMenuVars(a,b,c,d,e,f,g,h,i,k);this.menuItemsOrder[this.menuItemsOrder.length]=a;return this.menuItems[a]},addItemsFromMarkup:function(a){if(document.getElementById(a)){for(var a=document.getElementById(a),b=a.getElementsByTagName("LI"),c=0;c<b.length;c++){var d=
b[c].id.replace(/[^0-9]/gi,"");if(!d||this.menuItems[d])d=this.__getUniqueId();try{this.menuItems[d]=new DHTMLSuite.menuModelItem}catch(e){alert("Error: You need to include dhtmlSuite-menuModel.js in your html file")}this.menuItemsOrder[this.menuItemsOrder.length]=d;var f=0;if(b[c].parentNode!=a)f=b[c].parentNode.parentNode.id;var g=b[c].getAttribute("itemType");if(!g)g=b[c].itemType;if(g=="separator")this.menuItems[d].setAsSeparator(d,f);else{var g=f?"sub":"top",h=b[c].getElementsByTagName("A")[0];
if(h){if(h)var i=h.innerHTML;var k=b[c].getAttribute("itemIcon"),j=h.href;if(j=="#"||j.substr(j.length-1,1)=="#")j="";var m=b[c].getAttribute("jsFunction"),l=h.getAttribute("title");if(!l)l=h.title;this.menuItems[d].setMenuVars(d,i,k,j,f,l,m,g,!1)}}}i=a.getElementsByTagName("UL");for(c=0;c<i.length;c++){b=i[c].getAttribute("width");if(!b)b=i[c].width;b&&(d=i[c].parentNode.id.replace(/[^0-9]/gi,""),this.setSubMenuWidth(d,b))}a.style.display="none"}else alert("<UL> tag with id "+a+" does not exist")},
setSubMenuWidth:function(a,b){this.menuItems[a].setSubMenuWidth(b)},setMainMenuGroupWidth:function(a){this.mainMenuGroupWidth=a},addSeparator:function(a){id=this.__getUniqueId();a||(a=0);try{this.menuItems[id]=new DHTMLSuite.menuModelItem}catch(b){alert("Error: You need to include dhtmlSuite-menuModel.js in your html file")}this.menuItems[id].setAsSeparator(id,a);this.menuItemsOrder[this.menuItemsOrder.length]=id;return this.menuItems[id]},init:function(){this.__getDepths();this.__setHasSubs()},setMenuItemVisibility:function(a,
b){this.menuItems[a].setVisibility(b)},setSubMenuType:function(a,b){this.submenuType[a]=b;this.__getDepths()},getItems:function(a,b){if(!a)return this.menuItems;b||(b=[]);for(var c=0;c<this.menuItemsOrder.length;c++){var d=this.menuItemsOrder[c];if(d&&this.menuItems[d].parentId==a&&(b[b.length]=this.menuItems[d],this.menuItems[d].hasSubs))return this.getItems(this.menuItems[d].id,b)}return b},__getUniqueId:function(){var a=Math.random()+"",a=a.replace(".",""),a="99"+a;for(a/=1;this.menuItems[a];)a=
Math.random()+"",a=a.replace(".",""),a/=1;return a},__getDepths:function(){for(var a=0;a<this.menuItemsOrder.length;a++){var b=this.menuItemsOrder[a];if(b){for(;!this.menuItems[b];);this.menuItems[b].depth=1;if(this.menuItems[b].parentId)this.menuItems[b].depth=this.menuItems[this.menuItems[b].parentId].depth+1;this.menuItems[b].type=this.submenuType[this.menuItems[b].depth]}}},__setHasSubs:function(){for(var a=0;a<this.menuItemsOrder.length;a++){var b=this.menuItemsOrder[a];if(b){for(;!this.menuItems[b];);
if(this.menuItems[b].parentId)this.menuItems[this.menuItems[b].parentId].hasSubs=1}}},__hasSubs:function(a){for(var b=0;b<this.menuItemsOrder.length;b++)if((a=this.menuItemsOrder[b])&&this.menuItems[a].parentId==a)return!0;return!1},__deleteChildNodes:function(a,b){for(var c=[],d=0;d<this.menuItemsOrder.length;d++){var e=this.menuItemsOrder[d];e&&this.menuItems[e].parentId==a&&a&&(this.menuItems[e]=!1,c[c.length]=e,this.__deleteChildNodes(e,!0))}if(!b)for(d=0;d<c.length;d++)c[d]&&this.__deleteItemFromItemOrderArray(c[d]);
this.__setHasSubs()},__deleteANode:function(a){this.menuItems[a]=!1;this.__deleteItemFromItemOrderArray(a)},__deleteItemFromItemOrderArray:function(a){for(var b=0;b<this.menuItemsOrder.length;b++)if(this.menuItemsOrder[b]&&this.menuItemsOrder[b]==a){this.menuItemsOrder.splice(b,1);break}},__appendMenuModel:function(a,b){if(a){for(var c=a.getItems(),d=0;d<a.menuItemsOrder.length;d++){var e=a.menuItemsOrder[d];if(e){if(!c[e].parentId)c[e].parentId=b;this.menuItems[e]=c[e];for(var f=0;f<this.menuItemsOrder.length;f++)this.menuItemsOrder[f]&&
this.menuItemsOrder[f]==c[e].id&&this.menuItemsOrder.splice(f,1);this.menuItemsOrder[this.menuItemsOrder.length]=c[e].id}}this.__getDepths();this.__setHasSubs()}}};
